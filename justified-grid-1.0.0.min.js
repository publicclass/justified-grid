(function(f){if(typeof exports==="object"&&typeof module!=="undefined"){module.exports=f()}else if(typeof define==="function"&&define.amd){define([],f)}else{var g;if(typeof window!=="undefined"){g=window}else if(typeof global!=="undefined"){g=global}else if(typeof self!=="undefined"){g=self}else{g=this}g.justifyGrid = f()}})(function(){var define,module,exports;return (function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){
(function (global){
!function(t){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{var e;e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,e.justifyGrid=t()}}(function(){return function t(e,o,h){function r(n,s){if(!o[n]){if(!e[n]){var l="function"==typeof require&&require;if(!s&&l)return l(n,!0);if(i)return i(n,!0);var a=new Error("Cannot find module '"+n+"'");throw a.code="MODULE_NOT_FOUND",a}var d=o[n]={exports:{}};e[n][0].call(d.exports,function(t){var o=e[n][1][t];return r(o?o:t)},d,d.exports,t,e,o,h)}return o[n].exports}for(var i="function"==typeof require&&require,n=0;n<h.length;n++)r(h[n]);return r}({1:[function(t,e,o){function h(t,e){e=e||{},e.rowWidth=Math.max(1,e.rowWidth||800),e.rowHeight=Math.max(1,e.rowHeight||100),e.heightThreshold=Math.min(1,Math.max(0,e.heightThreshold||.1)),e.orphanThreshold=Math.min(1,Math.max(0,e.orphanThreshold||.25));for(var o=[],h=0;h<t.length;h++)o.push({row:null,element:t[h],aspectRatio:i(t[h]),height:function(){return this.row&&this.row.height||e.rowHeight},width:function(){return this.height()*this.aspectRatio}});console.log("build rows");var n=[],s=r(n,null,e.rowHeight),l=0,a=e.rowHeight;if(o.forEach(function(t){if(l+=t.width(),t.row=s,s.entries.push(t),console.log(" - %s,%s %sx%s",n.length,s.entries.length,t.width(),t.height()),l>=e.rowWidth){var o=[];console.log(" - overflowing: %s / %s",l,e.rowWidth),a=e.rowHeight/l*e.rowWidth,l=e.rowWidth,console.log(" - row: %sx%s",l,a);var h=Math.abs(e.rowHeight-a);if(h>=e.rowHeight*e.heightThreshold){console.log(" - over threshold. pop and resize %s > %s.",h,e.rowHeight*e.heightThreshold);var i=s.entries.pop();l=s.width(),a=e.rowHeight/l*e.rowWidth,s.height=a,l=s.width(),console.log(" - justified height: %s / %s * %s = %s",e.rowHeight,l,e.rowWidth,a),console.log(" - updated row: %sx%s",l,a),o.push(i),h=Math.abs(e.rowHeight-a)}h>e.rowHeight*e.heightThreshold&&console.log(" - STILL over threshold. pop and resize %s > %s.",h,e.heightThreshold),s.height=a,s=r(n,o,e.rowHeight),o.forEach(function(t){t.row=s}),l=s.width(),a=e.rowHeight}}),s.entries.length){s.height=a;var d=Math.abs(e.rowWidth-l);console.log("last row. should we justify?",d,e.rowWidth*e.orphanThreshold),d<=e.rowWidth*e.orphanThreshold&&(console.log("justify last row. %s > %s",d,e.rowWidth*e.orphanThreshold,l),a=e.rowHeight/s.width()*e.rowWidth,s.height=a,console.log(" - updated row: %sx%s",s.width(),a))}console.log("render elements:");var w=0,g=0;n.forEach(function(t){t.entries.forEach(function(t){console.log(" - entry at %s,%s %sx%s",0|w,0|g,0|t.width(),0|t.height()),t.element.style.left=Math.floor(w)+"px",t.element.style.top=Math.floor(g)+"px",t.element.style.width=Math.ceil(t.width())+"px",t.element.style.height=Math.ceil(t.height())+"px",t.element.style.position="absolute",w+=t.width()}),console.log(" - row at %sx%s",0|t.width(),0|t.height),w=0,g+=t.height})}function r(t,e,o){var h={entries:e?e:[],height:o,width:function(){return this.entries.reduce(function(t,e){return t+e.width()},0)}};return t.push(h),h}function i(t){var e=parseFloat(t.dataset.aspectRatio,10)||0;if(e)return e;var o=parseFloat(t.dataset.width||t.naturalWidth||t.getAttribute("width")||t.width,10)||1,h=parseFloat(t.dataset.height||t.naturalHeight||t.getAttribute("height")||t.height,10)||1;return o/h}e.exports=h},{}]},{},[1])(1)});
}).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})
},{}]},{},[1])(1)
});